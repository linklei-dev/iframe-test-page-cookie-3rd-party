<!doctype html>
<html>
<head>
    <title>LinkLei</title>
</head>
<body>
<script>
    const checkCookiesEnable = () => {
        /*
        let isCookieEnabled = (window.navigator.cookieEnabled) ? true : false;
        if (typeof window.navigator.cookieEnabled == "undefined" && !isCookieEnabled) {
            document.cookie = "testcookie";
            isCookieEnabled = (document.cookie.indexOf("testcookie") != -1) ? true : false;
        }
        return isCookieEnabled;
        */
        let isCookieEnabled = false;
        document.cookie = "testCookie=1; path=/";
        const cookies = document.cookie;
        isCookieEnabled = cookies.includes('testCookie=1');
        console.log("isCookieEnabled: ", isCookieEnabled);
        
        eraseCookie("testcookie");
        return isCookieEnabled;
    };
    const eraseCookie = (name) => {
        document.cookie = "testCookie=0; path=/";
    };
    (function () {
        window.addEventListener('message', event => {
            try {
                let data = JSON.parse(event.data)
                if (data['test'] !== 'cookie')
                    return
                let result = checkCookiesEnable()
                parent.postMessage(JSON.stringify({
                    'result': result
                }), event.origin)
            }
            catch (e) {
                console.error(e)
            }
        });
    })();
</script>
</body>
</html>
